---
const wheelItems = [
  "local talents",
  "government",
  "large entreprises",
  "SMEs",
  "technological partners",
  "local talents",
  "government",
  "large entreprises",
  "SMEs",
  "technological partners",
  "local talents",
  "government",
  "large entreprises",
  "SMEs",
  "technological partners",
  "local talents",
  "government",
  "large entreprises",
  "SMEs",
  "technological partners",
];
---

<script>
  import Swiper from "swiper";
  import "swiper/css";
  const container = document.querySelector(".business__wheel") as HTMLElement;
  const swiper = new Swiper(".business__swiper", {
    loop: true,
    slidesPerView: 2.5,
    slidesPerGroup: 1,
    initialSlide: 8,
    spaceBetween:10,
    breakpoints: {
      809: {
        direction: "vertical",
        loop: true,
        slidesPerView: 5,
        slidesPerGroup: 1,
        centeredSlides: true,
        initialSlide: 8,
      },
    },
  });
  setInterval(() => {
    swiper.slideNext();
    container.children[swiper.activeIndex - 1].classList.add("previous-slide");
    container.children[swiper.activeIndex - 2].classList.remove(
      "previous-slide"
    );
  }, 2000);
</script>

<div class="business__container">
  <div class="business">
    <span class="business__tagline"> Our 4 business units work with</span>
    <div class="swiper business__swiper">
      <div class="business__wheel swiper-wrapper">
        {
          wheelItems.map((item, index) => (
            <div
              data-index={index}
              class:list={["business__wheel-item", "swiper-slide", "business__swiper-slide"]}
            >
              {item}<span class="business__dot">.</span>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</div>

<style>
  .business {
    display: flex;
    align-items: center;
    border-top: 1px solid #232e36;
    border-bottom: 1px solid #232e36;
    max-width: 1300px;
    margin: 100px auto;
    padding: 56px 0;
    gap: 1rem;
  }
  .business__tagline {
    font-size: 3rem;
    line-height: 114%;
    color: #232e36;
    flex-shrink: 0;
  }
  .business__wheel-item {
    font-size: 3rem;
    line-height: 100%;
  }
  .business__swiper {
    height: 240px;
    margin: 0;
    pointer-events: none;
  }
  .business__swiper-slide {
    color: #eaeaea;
    transition: color 300ms;
  }
  .business__swiper-slide.swiper-slide-active {
    color: #f3260a;
  }
  .business__swiper-slide.swiper-slide-active + .swiper-slide,
  .previous-slide {
    color: #d3d3d3;
  }
  @media (max-width: 1332px){
    .business{
      padding: 2rem 0;
    }
    .business__container{
      padding: 0 2rem;
    }
    .business__wheel-item, .business__tagline{
      font-size: 2rem;
    }
  }
  @media (max-width: 809px) {
    .business {
      flex-direction: column;
      align-items: flex-start;
      margin-top: 80px;
      margin-bottom: 120px;
    }
    .business__swiper{
      width: 100%;
      height: 20px;
    }
    .business__tagline, .business__swiper-slide{
      font-size: 1.25rem;
    }
    .business__dot{
      display: none;
    }
  }
</style>
